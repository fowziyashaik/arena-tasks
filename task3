import java.util.ArrayList;
import java.util.List;

// ---------------------- Book Class ----------------------
class Book {
    private int id;
    private String title;
    private String author;
    private boolean isIssued;

    public Book(int id, String title, String author) {
        this.id = id;
        this.title = title;
        this.author = author;
        this.isIssued = false;
    }

    // Getters and Setters
    public int getId() { return id; }
    public String getTitle() { return title; }
    public String getAuthor() { return author; }
    public boolean isIssued() { return isIssued; }

    public void issueBook() { this.isIssued = true; }
    public void returnBook() { this.isIssued = false; }
}

// ---------------------- Member Class ----------------------
class Member {
    private int memberId;
    private String name;

    public Member(int memberId, String name) {
        this.memberId = memberId;
        this.name = name;
    }

    // Getters
    public int getMemberId() { return memberId; }
    public String getName() { return name; }
}

// ---------------------- Library Class ----------------------
class Library {
    private List<Book> books = new ArrayList<>();
    private List<Member> members = new ArrayList<>();

    // Add new book
    public void addBook(Book book) {
        books.add(book);
        System.out.println("Book added: " + book.getTitle());
    }

    // Register new member
    public void addMember(Member member) {
        members.add(member);
        System.out.println("Member added: " + member.getName());
    }

    // Issue book to member
    public void issueBook(int bookId, int memberId) {
        Book book = findBook(bookId);
        Member member = findMember(memberId);

        if (book == null) {
            System.out.println("Book not found!");
            return;
        }
        if (member == null) {
            System.out.println("Member not found!");
            return;
        }
        if (book.isIssued()) {
            System.out.println("Book is already issued!");
        } else {
            book.issueBook();
            System.out.println("Book '" + book.getTitle() + "' issued to " + member.getName());
        }
    }

    // Return book
    public void returnBook(int bookId) {
        Book book = findBook(bookId);
        if (book != null && book.isIssued()) {
            book.returnBook();
            System.out.println("Book returned: " + book.getTitle());
        } else {
            System.out.println("Book not found or not issued.");
        }
    }

    // Find book
    private Book findBook(int id) {
        for (Book b : books)
            if (b.getId() == id) return b;
        return null;
    }

    // Find member
    private Member findMember(int id) {
        for (Member m : members)
            if (m.getMemberId() == id) return m;
        return null;
    }

    // Display all books
    public void displayBooks() {
        System.out.println("\n--- Book List ---");
        for (Book b : books) {
            System.out.println(
                b.getId() + " | " + b.getTitle() + " | " + b.getAuthor() +
                " | Issued: " + b.isIssued()
            );
        }
    }

    // Display all members
    public void displayMembers() {
        System.out.println("\n--- Member List ---");
        for (Member m : members) {
            System.out.println(m.getMemberId() + " | " + m.getName());
        }
    }
}

// ---------------------- Main Class ----------------------
public class LibraryManagementSystem {
    public static void main(String[] args) {
        Library library = new Library();

        // Add sample books
        library.addBook(new Book(1, "The Alchemist", "Paulo Coelho"));
        library.addBook(new Book(2, "Wings of Fire", "A.P.J. Abdul Kalam"));

        // Add sample members
        library.addMember(new Member(101, "Fowziya"));
        library.addMember(new Member(102, "Ayesha"));

        // Issue and return operations
        library.issueBook(1, 101);
        library.returnBook(1);

        // Display data
        library.displayBooks();
        library.displayMembers();
    }
}
